// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table Model {
  id integer [pk]
  modelTypeId integer [ref: > ModelType.id]
  name varchar
  mlTaskId integer [ref: > MltaskType.id]
  description varchar
  displayName varchar
  structure varchar
  advantages array
  disadvantages array
}

Table MltaskType {  
  id integer [pk]
  name varchar
}

Table ModelDependency {
  id integer [pk]
  modelId integer [ref: > Model.id]
  name varchar
}

Table ModelGroup {
  modelId integer [ref: > Model.id]
  groupId integer [ref: > Group.id]
}

Table Group {
  id integer [pk]
  name varchar
}

Table ModelMetadata {
  modelId integer [pk, ref: - Model.id]
  decisionTree varchar
  ensembleType varchar
  family varchar
}

Table ModelType {
  id integer [pk] 
  name varchar
}

Table IncompatibleMetric {
  id integer [pk] 
  modelId integer [ref: > Model.id]
  metricName varchar
}

Table Parameter {
  id integer [pk]
  modelId integer [ref: > Model.id]
  name varchar
  label varchar
  description varchar
  enabled varchar
  fixedValue boolean
  ordering integer
}

Table ParameterType {
  id integer [pk] 
  name varchar
}

Table StringParameter {
  id integer [pk]
  parameterCategoryId integer [ref: - ParameterCategory.id]
  defaultValue varchar
  distribution varchar
}

Table BooleanParameter {
  id integer [pk]
  parameterCategoryId integer [ref: - ParameterCategory.id]
  defaultValue boolean
  distribution varchar
}

Table FloatParameter {
  id integer [pk] 
  parameterCategoryId integer [ref: - ParameterCategory.id]
  defaultValue double
  distribution varchar
}

Table IntegerParameter {
  id integer [pk]
  parameterCategoryId integer [ref: - ParameterCategory.id]
  defaultValue integer
  distribution varchar
}

Table ParameterCategory {
  id integer [pk]
  parameterId integer [ref: > Parameter.id]
  parameterTypeId integer [ref: > ParameterType.id]
  ordering integer
}

Table StringCategory{
  id integer [pk]
  stringParameterId integer [ref: > StringParameter.id]
  value boolean
}

Table Interval {
  id integer [pk]
  floatParameterId integer [ref: > FloatParameter.id]
  left boolean
  right boolean
  lower double
  upper double
}

Table Range {
  id integer [pk]
  integerParameterId integer [ref: > IntegerParameter.id]
  start integer
  stop integer
}

Table ConstraintEdge {
  id integer [pk]
  modelId integer [ref: > Model.id]
  source integer [ref: - Parameter.id]
  target integer [ref: - Parameter.id]
  constraintInformation varchar
}

Table Mapping {
  id integer [pk] 
  constraintEdgeId integer [ref: > ConstraintEdge.id]
  sourceType varchar
  targetType varchar 
}

Table CategoricalConstraint {
  id integer [pk]
  sourceMappingId integer [ref: - Mapping.id]
  targetMappingId integer [ref: - Mapping.id]
}

Table FloatConstraint {
  id integer [pk]
  sourceMappingId integer [ref: - Mapping.id]
  targetMappingId integer [ref: - Mapping.id]
}

Table IntegerConstraint {
  id integer [pk]
  sourceMappingId integer [ref: - Mapping.id]
  targetMappingId integer [ref: - Mapping.id]
}

Table CategoryConstraint{
  id integer [pk]
  categoricalConstraintId integer [ref: > CategoricalConstraint.id]
  stringValue varchar
  booleanValue boolean
}

Table IntervalConstraint {
  id integer [pk]
  floatConstraintId integer [ref: > FloatConstraint.id]
  left boolean
  right boolean
  lower double
  upper double
}

Table RangeConstraint {
  id integer [pk]
  integerConstraintId integer [ref: > IntegerConstraint.id]
  start integer
  stop integer
}

